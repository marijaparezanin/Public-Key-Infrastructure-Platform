<app-navbar></app-navbar>

<div class="dashboard-container">
  <h1>Admin Dashboard</h1>

  <!-- Tabs -->
  <div class="tabs">
    <button [class.active]="activeTab === 'addUser'" (click)="activeTab='addUser'">Add CA User</button>
    <button [class.active]="activeTab === 'addCert'" (click)="activeTab='addCert'">Add CA Certificate</button>
    <button [class.active]="activeTab === 'viewCerts'" (click)="activeTab='viewCerts'">View All Certificates</button>
  </div>

  <!-- Tab content -->
  <div class="tab-content">

    <!-- Add CA User Form -->
    <form *ngIf="activeTab==='addUser'" class="form">
      <label>Email</label>
      <input type="email" placeholder="Enter user email">

      <label>Password</label>
      <input type="password" placeholder="Enter password">

      <label>Confirm Password</label>
      <input type="password" placeholder="Confirm password">

      <label>First Name</label>
      <input type="text" placeholder="First Name">

      <label>Last Name</label>
      <input type="text" placeholder="Last Name">

      <label>Organization</label>
      <input type="text" placeholder="Organization">

      <button type="submit">Create User</button>
    </form>

    <!-- Add CA Certificate Form -->
    <form *ngIf="activeTab==='addCert'" class="form" (ngSubmit)="submitCertificate()">
      <label>Certificate Name</label>
      <input type="text" [(ngModel)]="certificateForm.name" name="name" placeholder="Enter certificate name" required>

      <label>Owner Common Name (CN)</label>
      <input type="text" [(ngModel)]="certificateForm.cn" name="cn" placeholder="CN" required>

      <label>Organization (O)</label>
      <input type="text" [(ngModel)]="certificateForm.o" name="o" placeholder="Organization" required>

      <label>Organizational Unit (OU)</label>
      <input type="text" [(ngModel)]="certificateForm.ou" name="ou" placeholder="OU">

      <label>Country (C)</label>
      <input type="text" [(ngModel)]="certificateForm.c" name="c" placeholder="Country">

      <label>Email</label>
      <input type="email" [(ngModel)]="certificateForm.email" name="email" placeholder="Email">

      <label>Certificate Type</label>
      <select [(ngModel)]="certificateForm.type" name="type">
        <option>Root</option>
        <option>Intermediate</option>
        <option>End-Entity</option>
      </select>

      <label>Validity (days)</label>
      <input type="number" [(ngModel)]="certificateForm.validity" name="validity" placeholder="Validity" required>

      <button type="submit">Issue Certificate</button>
    </form>

    <!-- View All Certificates -->
    <div *ngIf="activeTab==='viewCerts'" class="table-container">
      <table>
        <thead>
        <tr>
          <th>ID</th>
          <th>CN</th>
          <th>O</th>
          <th>OU</th>
          <th>C</th>
          <th>Email</th>
          <th>Type</th>
          <th>Validity</th>
          <th>Status</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let cert of certificates">
          <td>{{cert.id}}</td>
          <td>{{cert.cn}}</td>
          <td>{{cert.o}}</td>
          <td>{{cert.ou}}</td>
          <td>{{cert.c}}</td>
          <td>{{cert.email}}</td>
          <td>{{cert.type}}</td>
          <td>{{cert.validity}}</td>
          <td>{{cert.status}}</td>
        </tr>
        </tbody>
      </table>
    </div>

  </div>
</div>
