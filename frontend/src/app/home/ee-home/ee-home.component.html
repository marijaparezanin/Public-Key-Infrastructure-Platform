<app-navbar></app-navbar>

<div class="dashboard-container">
  <h1>End-Entity User Dashboard</h1>

  <!-- Tabs -->
  <div class="tabs">
    <button [class.active]="activeTab==='uploadGenerate'" (click)="activeTab='uploadGenerate'">Upload / Generate</button>
    <button [class.active]="activeTab==='selectCA'" (click)="activeTab='selectCA'">Select CA Certificate</button>
    <button [class.active]="activeTab==='revokeAndDownload'" (click)="activeTab='revokeAndDownload'">Revoke/Download Certificate & Key</button>
  </div>

  <!-- Tab content -->
  <div class="tab-content">

    <!-- Combined Upload / Generate Form -->
    <form *ngIf="activeTab==='uploadGenerate'" class="form combined-form">

      <div class="column">
        <h3>Upload CSR & Key</h3>
        <label>Upload CSR (.pem)</label>
        <input type="file" accept=".pem">

        <label>Upload Private Key (.key)</label>
        <input type="file" accept=".key">

        <button type="submit">Upload</button>
      </div>

      <div class="column">
        <h3>Generate Keys & Certificate</h3>
        <label>Common Name (CN)</label>
        <input type="text" placeholder="Enter CN">

        <label>Organization (O)</label>
        <input type="text" placeholder="Enter Organization">

        <label>Organizational Unit (OU)</label>
        <input type="text" placeholder="Enter OU">

        <label>Country (C)</label>
        <input type="text" placeholder="Enter Country">

        <label>Email</label>
        <input type="email" placeholder="Enter Email">

        <label>Validity (days)</label>
        <input type="number" placeholder="Enter Validity">

        <button type="submit">Generate</button>
      </div>

    </form>

    <!-- Select CA Certificate Form -->
    <form *ngIf="activeTab==='selectCA'" class="form">
      <label>Select CA Certificate</label>
      <select>
        <option *ngFor="let ca of caCertificates">{{ca.name}}</option>
      </select>

      <button type="submit">Select</button>
    </form>

    <!-- Revoke and Download Certificates -->
    <app-all-certifications *ngIf="activeTab==='revokeAndDownload'" [role]="'ee'" class="dashbord-column"></app-all-certifications>

  </div>
</div>

<app-dialog
  *ngIf="dialogVisible"
  [message]="dialogMessage"
  [type]="dialogType"
  (close)="onDialogClose()"
  (confirm)="onDialogConfirm()">
</app-dialog>
