<app-navbar></app-navbar>

<div class="dashboard-container">
  <h1>End-Entity User Dashboard</h1>

  <!-- Tabs -->
  <div class="tabs">
    <button [class.active]="activeTab==='uploadGenerate'" (click)="activeTab='uploadGenerate'">Get Certificate</button>
    <button [class.active]="activeTab==='revokeAndDownload'" (click)="activeTab='revokeAndDownload'">My Certificates</button>
  </div>

  <!-- Tab content -->
  <div class="tab-content">

    <!-- Combined Upload / Generate Form -->
    <form *ngIf="activeTab==='uploadGenerate'" class="form combined-form">

      <div class="column">
        <h3>Upload CSR & Key</h3>
        <label>Upload CSR (.pem)</label>
        <input type="file" accept=".pem">

        <label>Upload Private Key (.key)</label>
        <input type="file" accept=".key">

        <button type="submit">Upload</button>
      </div>

      <div class="column">
        <h3>Generate Keys & Certificate</h3>
        <app-create-certification [role]="'ee'"></app-create-certification>
      </div>

    </form>

    <!-- Revoke and Download Certificates -->
    <app-all-certifications *ngIf="activeTab==='revokeAndDownload'" [role]="'ee'" class="dashbord-column"></app-all-certifications>

  </div>
</div>

<app-dialog
  *ngIf="dialogVisible"
  [message]="dialogMessage"
  [type]="dialogType"
  (close)="onDialogClose()">
</app-dialog>
