<app-navbar></app-navbar>

<div class="dashboard-container">
  <h1>CA User Dashboard</h1>

  <!-- Tabs -->
  <div class="tabs">
    <button [class.active]="activeTab === 'issueIntermediate'" (click)="activeTab='issueIntermediate'">
      Issue Intermediate Certificate
    </button>
    <button [class.active]="activeTab === 'issueEndEntity'" (click)="activeTab='issueEndEntity'">
      Issue End-Entity Certificate
    </button>
    <button [class.active]="activeTab === 'viewCerts'" (click)="activeTab='viewCerts'">
      View My Certificates
    </button>
    <button [class.active]="activeTab === 'manageTemplates'" (click)="activeTab='manageTemplates'">
      Manage Templates
    </button>
  </div>

  <!-- Tab content -->
  <div class="tab-content">

    <!-- Issue Intermediate Certificate Form -->
    <form *ngIf="activeTab==='issueIntermediate'" class="form">
      <label>Certificate Name</label>
      <input type="text" placeholder="Enter certificate name">

      <label>Owner CN</label>
      <input type="text" placeholder="Common Name (CN)">

      <label>Organization (O)</label>
      <input type="text" placeholder="Organization">

      <label>Organizational Unit (OU)</label>
      <input type="text" placeholder="OU">

      <label>Country (C)</label>
      <input type="text" placeholder="Country">

      <label>Email</label>
      <input type="email" placeholder="Email">

      <label>Validity (days)</label>
      <input type="number" placeholder="Validity">

      <button type="submit">Issue Certificate</button>
    </form>

    <!-- Issue End-Entity Certificate Form -->
    <form *ngIf="activeTab==='issueEndEntity'" class="form">
      <label>Certificate Name</label>
      <input type="text" placeholder="Enter certificate name">

      <label>Owner CN</label>
      <input type="text" placeholder="Common Name (CN)">

      <label>Organization (O)</label>
      <input type="text" placeholder="Organization">

      <label>Organizational Unit (OU)</label>
      <input type="text" placeholder="OU">

      <label>Country (C)</label>
      <input type="text" placeholder="Country">

      <label>Email</label>
      <input type="email" placeholder="Email">

      <label>Validity (days)</label>
      <input type="number" placeholder="Validity">

      <button type="submit">Issue Certificate</button>
    </form>

    <!-- View My Certificates Table -->
    <div *ngIf="activeTab==='viewCerts'" class="table-container">
      <table>
        <thead>
        <tr>
          <th>ID</th>
          <th>CN</th>
          <th>O</th>
          <th>OU</th>
          <th>C</th>
          <th>Email</th>
          <th>Type</th>
          <th>Validity</th>
          <th>Status</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let cert of certificates">
          <td>{{cert.id}}</td>
          <td>{{cert.cn}}</td>
          <td>{{cert.o}}</td>
          <td>{{cert.ou}}</td>
          <td>{{cert.c}}</td>
          <td>{{cert.email}}</td>
          <td>{{cert.type}}</td>
          <td>{{cert.validity}}</td>
          <td>{{cert.status}}</td>
        </tr>
        </tbody>
      </table>
    </div>

    <!-- Manage Templates Table/Form -->
    <div *ngIf="activeTab==='manageTemplates'" class="table-container">
      <table>
        <thead>
        <tr>
          <th>Template Name</th>
          <th>CA Issuer</th>
          <th>CN Regex</th>
          <th>SAN Regex</th>
          <th>TTL (days)</th>
          <th>Key Usage</th>
          <th>Extended Key Usage</th>
          <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let template of templates">
          <td>{{template.name}}</td>
          <td>{{template.caIssuer}}</td>
          <td>{{template.cnRegex}}</td>
          <td>{{template.sanRegex}}</td>
          <td>{{template.ttl}}</td>
          <td>{{template.keyUsage}}</td>
          <td>{{template.extendedKeyUsage}}</td>
          <td>
            <button class="edit">Edit</button>
            <button class="delete">Delete</button>
          </td>
        </tr>
        </tbody>
      </table>
    </div>

  </div>
</div>
